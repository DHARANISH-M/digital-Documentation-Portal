/* ========================================
   Dark & Light Theme System
   ======================================== */

/* ---- Smooth Theme Transition ---- */
html,
html *,
html *::before,
html *::after {
    transition: background-color 0.35s ease,
        border-color 0.35s ease,
        color 0.2s ease,
        box-shadow 0.3s ease;
}

/* ---- Dark Mode Variable Overrides ---- */
[data-theme="dark"] {
    /* Surface & Background Colors */
    --gray-50: #0f1117;
    --gray-100: #161822;
    --gray-200: #1e2030;
    --gray-300: #2a2d3e;
    --gray-400: #4a4e69;
    --gray-500: #8b8fa3;
    --gray-600: #a8adc0;
    --gray-700: #c4c8d8;
    --gray-800: #e0e2eb;
    --gray-900: #f0f1f5;

    /* Adjusted primaries for dark bg */
    --primary-50: rgba(59, 130, 246, 0.08);
    --primary-100: rgba(59, 130, 246, 0.14);
    --primary-200: rgba(59, 130, 246, 0.22);
    --primary-600: #4a8df8;
    --primary-700: #6ba3fa;

    /* Shadows for dark mode — deeper and more pronounced */
    --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 8px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 20px -3px rgba(0, 0, 0, 0.5), 0 4px 8px -4px rgba(0, 0, 0, 0.4);
    --shadow-xl: 0 20px 30px -5px rgba(0, 0, 0, 0.55), 0 8px 12px -6px rgba(0, 0, 0, 0.4);

    /* Semantic — slightly brighter for contrast */
    --success: #22d3a0;
    --warning: #fbbf24;
    --error: #f87171;
    --info: #60a5fa;

    /* Accent — slight brightness bump */
    --accent-blue: #60a5fa;
    --accent-orange: #fbbf24;
    --accent-green: #34d399;
    --accent-red: #f87171;
    --accent-purple: #a78bfa;

    /* Category colors — brighter for dark bg */
    --category-financial: #34d399;
    --category-legal: #a78bfa;
    --category-hr: #f472b6;
    --category-marketing: #60a5fa;
    --category-operations: #fbbf24;
    --category-other: #8b8fa3;
}

/* ---- Base Element Overrides ---- */
[data-theme="dark"] body {
    background-color: #0f1117;
    color: #e0e2eb;
}

/* ---- Card / Surface Backgrounds ---- */
[data-theme="dark"] .card,
[data-theme="dark"] .document-card,
[data-theme="dark"] .folder-card,
[data-theme="dark"] .stat-card,
[data-theme="dark"] .quick-actions-card,
[data-theme="dark"] .modal,
[data-theme="dark"] .breadcrumb,
[data-theme="dark"] .documents-empty,
[data-theme="dark"] .documents-locked,
[data-theme="dark"] .folders-empty,
[data-theme="dark"] .search-empty,
[data-theme="dark"] .activity-list,
[data-theme="dark"] .upload-card,
[data-theme="dark"] .profile-card,
[data-theme="dark"] .help-card,
[data-theme="dark"] .admin-card {
    background: #161822;
    border-color: #1e2030;
}

/* ---- Sidebar ---- */
[data-theme="dark"] .sidebar {
    background-color: #12141e;
    border-right-color: #1e2030;
}

[data-theme="dark"] .sidebar-logo {
    border-bottom-color: #1e2030;
}

[data-theme="dark"] .logo-icon {
    background-color: rgba(59, 130, 246, 0.12);
}

/* ---- Header ---- */
[data-theme="dark"] .header {
    background-color: rgba(18, 20, 30, 0.85);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom-color: #1e2030;
}

/* ---- Dropdown Menu ---- */
[data-theme="dark"] .dropdown-menu,
[data-theme="dark"] .user-dropdown {
    background: #1a1d2e;
    border-color: #2a2d3e;
    box-shadow: 0 12px 32px -4px rgba(0, 0, 0, 0.6);
}

[data-theme="dark"] .dropdown-header {
    border-bottom-color: #2a2d3e;
}

[data-theme="dark"] .dropdown-divider {
    background-color: #2a2d3e;
}

[data-theme="dark"] .dropdown-item:hover {
    background-color: rgba(255, 255, 255, 0.05);
}

/* ---- Buttons ---- */
[data-theme="dark"] .btn-secondary {
    background-color: #1e2030;
    color: #c4c8d8;
    border-color: #2a2d3e;
}

[data-theme="dark"] .btn-secondary:hover {
    background-color: #252838;
    border-color: #4a4e69;
}

[data-theme="dark"] .btn-icon:hover {
    background-color: rgba(255, 255, 255, 0.08);
}

/* ---- Forms ---- */
[data-theme="dark"] .form-input,
[data-theme="dark"] .form-select,
[data-theme="dark"] .form-textarea,
[data-theme="dark"] .rename-input,
[data-theme="dark"] .search-input,
[data-theme="dark"] input[type="text"],
[data-theme="dark"] input[type="password"],
[data-theme="dark"] input[type="email"],
[data-theme="dark"] textarea,
[data-theme="dark"] select {
    background-color: #1a1d2e;
    border-color: #2a2d3e;
    color: #e0e2eb;
}

[data-theme="dark"] .form-input:focus,
[data-theme="dark"] .form-select:focus,
[data-theme="dark"] input[type="text"]:focus,
[data-theme="dark"] input[type="password"]:focus,
[data-theme="dark"] input[type="email"]:focus,
[data-theme="dark"] textarea:focus {
    border-color: var(--primary-600);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

[data-theme="dark"] .form-input::placeholder,
[data-theme="dark"] input::placeholder {
    color: #4a4e69;
}

/* ---- Search Controls ---- */
[data-theme="dark"] .search-controls,
[data-theme="dark"] .search-form {
    background: #161822;
    border-color: #1e2030;
}

[data-theme="dark"] .search-input-wrapper {
    background: #1a1d2e;
    border-color: #2a2d3e;
}

[data-theme="dark"] .category-btn {
    background: #1a1d2e;
    color: #a8adc0;
    border-color: #2a2d3e;
}

[data-theme="dark"] .category-btn:hover {
    background: #252838;
}

[data-theme="dark"] .category-btn-active {
    background: var(--primary-600);
    color: white;
    border-color: var(--primary-600);
}

/* ---- Nav Item ---- */
[data-theme="dark"] .nav-item:hover {
    background-color: rgba(255, 255, 255, 0.06);
}

[data-theme="dark"] .nav-item-active {
    background-color: rgba(59, 130, 246, 0.12);
}

[data-theme="dark"] .nav-item-active:hover {
    background-color: rgba(59, 130, 246, 0.18);
}

/* ---- Folder Card Protected ---- */
[data-theme="dark"] .folder-card-protected {
    border-color: rgba(139, 92, 246, 0.25);
}

[data-theme="dark"] .folder-card-protected:hover {
    border-color: rgba(139, 92, 246, 0.4);
}

[data-theme="dark"] .folder-icon {
    background: linear-gradient(135deg, rgba(251, 191, 36, 0.12), rgba(245, 158, 11, 0.08));
}

[data-theme="dark"] .folder-icon-protected {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(59, 130, 246, 0.1));
}

/* ---- Document Card ---- */
[data-theme="dark"] .document-card .document-actions {
    border-top-color: #1e2030;
}

/* ---- Badge overrides for dark mode ---- */
[data-theme="dark"] .badge-financial {
    background-color: rgba(34, 211, 160, 0.12);
}

[data-theme="dark"] .badge-legal {
    background-color: rgba(167, 139, 250, 0.12);
}

[data-theme="dark"] .badge-hr {
    background-color: rgba(244, 114, 182, 0.12);
}

[data-theme="dark"] .badge-marketing {
    background-color: rgba(96, 165, 250, 0.12);
}

[data-theme="dark"] .badge-operations {
    background-color: rgba(251, 191, 36, 0.12);
}

[data-theme="dark"] .badge-other {
    background-color: rgba(139, 143, 163, 0.12);
}

/* ---- Folder Session Badge ---- */
[data-theme="dark"] .folder-session-badge {
    background: rgba(34, 211, 160, 0.12);
    color: #34d399;
}

[data-theme="dark"] .folder-protected-badge {
    background: rgba(167, 139, 250, 0.12);
    color: #a78bfa;
}

/* ---- Modal Overlay ---- */
[data-theme="dark"] .modal-overlay {
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
}

/* ---- Password Modal ---- */
[data-theme="dark"] .folder-password-modal {
    background: #161822;
    border-color: #2a2d3e;
}

[data-theme="dark"] .fpw-lock-circle {
    background: rgba(139, 92, 246, 0.1);
}

/* ---- Dashboard Specific ---- */
[data-theme="dark"] .dashboard-header {
    border-bottom-color: #1e2030;
}

/* Storage bar */
[data-theme="dark"] .storage-bar {
    background: #1e2030;
}

/* ---- Activity Items ---- */
[data-theme="dark"] .activity-item {
    border-bottom-color: #1e2030;
}

[data-theme="dark"] .activity-item:hover {
    background: rgba(255, 255, 255, 0.03);
}

[data-theme="dark"] .activity-icon {
    background: rgba(59, 130, 246, 0.1);
}

/* ---- Upload Area ---- */
[data-theme="dark"] .upload-dropzone,
[data-theme="dark"] .dropzone {
    background: #1a1d2e;
    border-color: #2a2d3e;
}

[data-theme="dark"] .upload-dropzone:hover,
[data-theme="dark"] .dropzone:hover {
    border-color: var(--primary-600);
    background: rgba(59, 130, 246, 0.05);
}

/* ---- Error / Success Messages ---- */
[data-theme="dark"] .upload-error,
[data-theme="dark"] .error-message {
    background: rgba(248, 113, 113, 0.1);
    border-color: rgba(248, 113, 113, 0.2);
}

[data-theme="dark"] .upload-success,
[data-theme="dark"] .success-message {
    background: rgba(34, 211, 160, 0.1);
    border-color: rgba(34, 211, 160, 0.2);
}

/* ---- Protection Toggle ---- */
[data-theme="dark"] .protection-toggle {
    background: #1a1d2e;
    border-color: #2a2d3e;
}

/* ---- Scrollbar Dark ---- */
[data-theme="dark"] ::-webkit-scrollbar-track {
    background: #0f1117;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
    background: #2a2d3e;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
    background: #4a4e69;
}

/* ---- Cursor Glow Adjust for Dark ---- */
[data-theme="dark"] .cursor-glow {
    background: radial-gradient(circle,
            rgba(96, 165, 250, 0.25) 0%,
            rgba(167, 139, 250, 0.12) 50%,
            transparent 70%);
}

[data-theme="dark"] .cursor-glow.cursor-hover {
    background: radial-gradient(circle,
            rgba(167, 139, 250, 0.25) 0%,
            rgba(96, 165, 250, 0.1) 50%,
            transparent 70%);
}

[data-theme="dark"] .cursor-dot {
    background: var(--accent-blue);
}

/* ---- Profile / Help / Admin Pages ---- */
[data-theme="dark"] .profile-section,
[data-theme="dark"] .help-section,
[data-theme="dark"] .admin-section,
[data-theme="dark"] .admin-table,
[data-theme="dark"] .ticket-card {
    background: #161822;
    border-color: #1e2030;
}

[data-theme="dark"] table th {
    background: #1a1d2e;
    border-color: #2a2d3e;
}

[data-theme="dark"] table td {
    border-color: #1e2030;
}

[data-theme="dark"] table tr:hover {
    background: rgba(255, 255, 255, 0.03);
}

/* ---- Selection color ---- */
[data-theme="dark"] ::selection {
    background: rgba(96, 165, 250, 0.3);
    color: white;
}

/* ---- Login / Signup Pages ---- */
[data-theme="dark"] .login-page,
[data-theme="dark"] .signup-page,
[data-theme="dark"] .auth-page {
    background: #0f1117;
}

[data-theme="dark"] .login-card,
[data-theme="dark"] .signup-card,
[data-theme="dark"] .auth-card {
    background: #161822;
    border-color: #1e2030;
}

/* ---- Theme Toggle Button ---- */
.theme-toggle {
    position: relative;
    width: 44px;
    height: 44px;
    border-radius: var(--radius-lg);
    background: transparent;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    overflow: hidden;
}

.theme-toggle:hover {
    background: var(--gray-100);
    transform: scale(1.08);
}

.theme-toggle:active {
    transform: scale(0.95);
}

.theme-toggle-icon {
    position: relative;
    width: 22px;
    height: 22px;
    transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Sun Icon */
.theme-sun {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transform: rotate(90deg) scale(0.5);
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.theme-sun svg {
    width: 22px;
    height: 22px;
    color: #fbbf24;
    filter: drop-shadow(0 0 4px rgba(251, 191, 36, 0.4));
}

/* Moon Icon */
.theme-moon {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 1;
    transform: rotate(0deg) scale(1);
    transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.theme-moon svg {
    width: 20px;
    height: 20px;
    color: var(--gray-600);
}

/* When dark mode is active: show sun, hide moon */
[data-theme="dark"] .theme-sun {
    opacity: 1;
    transform: rotate(0deg) scale(1);
}

[data-theme="dark"] .theme-moon {
    opacity: 0;
    transform: rotate(-90deg) scale(0.5);
}

[data-theme="dark"] .theme-toggle:hover {
    background: rgba(251, 191, 36, 0.08);
}

/* ---- Animated Stars for Dark Mode Background ---- */
[data-theme="dark"] .main-content {
    position: relative;
}

[data-theme="dark"] .main-content::before {
    content: '';
    position: fixed;
    top: 0;
    left: var(--sidebar-width);
    right: 0;
    bottom: 0;
    background-image:
        radial-gradient(2px 2px at 15% 20%, rgba(255, 255, 255, 0.04) 50%, transparent 50%),
        radial-gradient(2px 2px at 45% 60%, rgba(255, 255, 255, 0.03) 50%, transparent 50%),
        radial-gradient(1px 1px at 75% 30%, rgba(255, 255, 255, 0.05) 50%, transparent 50%),
        radial-gradient(1px 1px at 30% 80%, rgba(255, 255, 255, 0.04) 50%, transparent 50%),
        radial-gradient(1px 1px at 85% 75%, rgba(255, 255, 255, 0.03) 50%, transparent 50%),
        radial-gradient(2px 2px at 60% 10%, rgba(255, 255, 255, 0.04) 50%, transparent 50%);
    pointer-events: none;
    z-index: 0;
    animation: starsFloat 60s linear infinite;
}

@keyframes starsFloat {
    0% {
        transform: translateY(0);
    }

    100% {
        transform: translateY(-20px);
    }
}

/* ---- User Avatar Dark ---- */
[data-theme="dark"] .user-avatar {
    background-color: var(--primary-600);
}

[data-theme="dark"] .user-menu-trigger:hover {
    background: rgba(255, 255, 255, 0.06);
}

/* ---- Alert Banners ---- */
[data-theme="dark"] .alert-info {
    background: rgba(96, 165, 250, 0.1);
    border-color: rgba(96, 165, 250, 0.2);
}

[data-theme="dark"] .alert-warning {
    background: rgba(251, 191, 36, 0.1);
    border-color: rgba(251, 191, 36, 0.2);
}

/* ---- Locked Folder ---- */
[data-theme="dark"] .documents-locked {
    background: #161822;
    border-color: rgba(167, 139, 250, 0.2);
}

[data-theme="dark"] .documents-locked-icon {
    background: linear-gradient(135deg, rgba(167, 139, 250, 0.12), rgba(96, 165, 250, 0.08));
}

/* ---- Breadcrumb ---- */
[data-theme="dark"] .breadcrumb {
    background: #161822;
    border-color: #1e2030;
}

/* ---- User menu-trigger ---- */
[data-theme="dark"] .user-menu-trigger:hover {
    background-color: rgba(255, 255, 255, 0.06);
}